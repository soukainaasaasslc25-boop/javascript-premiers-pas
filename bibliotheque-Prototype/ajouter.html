<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catalogue et Ajouter</title>
</head>
<body>

  <h3>Ajouter un nouveau livre</h3>
  <form id="form">
    <label for="code">Code</label>
    <input type="number" id="code">

    <label for="Auteur">Auteur</label>
    <input type="text" id="Auteur" placeholder="Auteur">

    <label for="Titre">Titre</label>
    <input type="text" id="Titre" placeholder="Le titre du livre">

    <label for="Annee">Année</label>
    <input type="number" id="Annee" placeholder="Année de publication">

    <label for="Prix">Prix</label>
    <input type="number" id="Prix" placeholder="Prix du livre en DH">

    <label for="disponible">Disponible</label>
    <input type="checkbox" id="disponible">

    <button type="submit">Ajouter</button>
  </form>

  <script>
    const form = document.getElementById("form");

    form.style.border = "2px solid #d88837";
    form.style.padding = "20px";
    form.style.borderRadius = "10px";
    form.style.width = "300px";
    form.style.backgroundColor = "#f9f9f9";
    form.style.display = "flex";
    form.style.flexDirection = "column";
    form.style.gap = "10px";

    form.onsubmit = function(e) {
      e.preventDefault();

      const livre = {
        code: parseInt(document.getElementById("code").value),
        titre: document.getElementById("Titre").value.trim(),
        auteur: document.getElementById("Auteur").value.trim(),
        annee: parseInt(document.getElementById("Annee").value),
        prixDh: parseFloat(document.getElementById("Prix").value),
        disponible: document.getElementById("disponible").checked
      };

      if (isNaN(livre.code) || !livre.titre || !livre.auteur || isNaN(livre.annee) || isNaN(livre.prixDh)) {
        alert("Veuillez remplir correctement tous les champs !");
        return;
      }

      if (window.opener && !window.opener.closed) {
        window.opener.ajouterLivre(livre);
        alert("Livre ajouté !");
        window.close();
      } else {
        alert("La page catalogue n'est pas ouverte !");
      }
    };
  </script>

</body>
</html>
