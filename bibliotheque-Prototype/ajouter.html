<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=
    , initial-scale=1.0">
    <title>catalogue et ajouter</title>
</head>
<body>
    
   
   
    <h3>Ajouter une nouvaux</h3>
    <form action="" id="form">
        <label for="code"> code </label> 

        <input type="number" id="code">

        <label for="Auteur"> Auteur </label> 
        <input type="text" id="Auteur" placeholder="  Auteur">
        <label for="Titre"> Titre </label> 
        <input type="text" id="Titre" placeholder=" le titre de livre">  
        <label for="Annee"> Annee </label> 
        <input type="text" id="Annee" placeholder="Annee de publication">
        <label for="Prix"> Prix </label> 
        <input type="number" id="Prix" placeholder="Prix de livre en DH">
        <label for="disponible">disponible</label>
        <input type="checkbox" name="disponible" id="disponible">

         <button type="submit">Ajouter</button>
        
        </form>
           
    

    <script>

  let form =document.getElementById("form");
form.style.border = "2px solid #d88837ff";
form.style.padding = "20px";
form.style.borderRadius = "10px";
form.style.width = "300px";
form.style.backgroundColor = "#f9f9f9";
form.style.display = "flex";
form.style.flexDirection = "column";
form.style.gap = "10px";

    document.getElementById("form").onsubmit = function(e) {
  e.preventDefault();

  const livre = {
    code: parseInt(document.getElementById("code").value),
    titre: document.getElementById("Titre").value,
    auteur: document.getElementById("Auteur").value,
    annee: parseInt(document.getElementById("Annee").value),
    prixDh: parseFloat(document.getElementById("Prix").value),
    disponible: document.getElementById("disponible").checked
  };

     if (isNaN(code) || !titre || !auteur || isNaN(annee) || isNaN(prixDh)) {
        alert("Veuillez remplir correctement tous les champs !");
        return; // Stop la soumission si un champ est vide ou invalide
    }
    livre = { code, titre, auteur, annee, prixDh, disponible };

  if (window.opener && !window.opener.closed) {
    window.opener.ajouterLivre(livre); // Envoie le livre à catalogue.html
    alert("Livre ajouté !");
    window.close(); // Ferme automatiquement la fenêtre
  } else {
    alert("La page catalogue n'est pas ouverte !");
  }
};
    </script>



</body>
</html>